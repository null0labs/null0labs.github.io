
[{"content":"","date":"22 July 2025","externalUrl":null,"permalink":"/","section":"","summary":"","title":"","type":"page"},{"content":"","date":"22 July 2025","externalUrl":null,"permalink":"/blog/","section":"Blog","summary":"","title":"Blog","type":"blog"},{"content":"","date":"22 July 2025","externalUrl":null,"permalink":"/tags/blog/","section":"Tags","summary":"","title":"Blog","type":"tags"},{"content":"","date":"22 July 2025","externalUrl":null,"permalink":"/tags/cidr/","section":"Tags","summary":"","title":"Cidr","type":"tags"},{"content":"CIDR Notation: Your Shortcut to Subnet Mastery Ever stared at a /27 and felt like it was judging you? Been there. Whether you‚Äôre diving into lab builds or trying to squeeze the most out of your IPv4 ranges, CIDR isn‚Äôt just notation‚Äîit‚Äôs strategy.\nGrab the sheets, print them, laminate them, tape them to your monitor‚Äîwhatever helps.\nUnderstanding IP Addressing and CIDR Charts\n","date":"22 July 2025","externalUrl":null,"permalink":"/blog/cidr-cheetsheets/","section":"Blog","summary":"","title":"CIDR Cheatsheets","type":"blog"},{"content":"","date":"22 July 2025","externalUrl":null,"permalink":"/tags/ipaddresses/","section":"Tags","summary":"","title":"Ipaddresses","type":"tags"},{"content":"","date":"22 July 2025","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"18 July 2025","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"18 July 2025","externalUrl":null,"permalink":"/tags/cisco/","section":"Tags","summary":"","title":"Cisco","type":"tags"},{"content":" # Ever wondered how a single router can manage traffic across multiple VLANs? You\u0026rsquo;re about to find out ‚Äî with a literal Cisco router on a stick balancing above a switch, this visual walkthrough makes \u0026ldquo;Router on a Stick\u0026rdquo; not just memorable, but masterable.\nIn this episode from Null0 Labs, I break down:\nüîÅ Why Inter-VLAN routing matters ‚öôÔ∏è Subinterfaces and trunking explained üö¶ Real-world Cisco setup with just one port Whether you‚Äôre prepping for your certs or building your lab, this tutorial makes the fundamentals unforgettable. Subscribe for more bold networking visuals and rock-solid tech insights!\n# Subscribe on YouTube ","date":"18 July 2025","externalUrl":null,"permalink":"/videos/router-on-a-stick/","section":"Videos","summary":"","title":"Router on a Stick ‚Äì Inter-VLAN Routing Made Ridiculously Clear","type":"videos"},{"content":"","date":"18 July 2025","externalUrl":null,"permalink":"/tags/routing/","section":"Tags","summary":"","title":"Routing","type":"tags"},{"content":"","date":"18 July 2025","externalUrl":null,"permalink":"/categories/tutorial/","section":"Categories","summary":"","title":"Tutorial","type":"categories"},{"content":"","date":"18 July 2025","externalUrl":null,"permalink":"/videos/","section":"Videos","summary":"","title":"Videos","type":"videos"},{"content":"","date":"18 July 2025","externalUrl":null,"permalink":"/tags/vlan/","section":"Tags","summary":"","title":"Vlan","type":"tags"},{"content":" # Simplify Your Network Management with Cisco VTPv3 In this video, we‚Äôll walk through the powerful features of Cisco VTP (VLAN Trunking Protocol) version 3‚Äîan absolute game-changer for streamlining VLAN administration across large-scale networks.\nHighlights:\nStep-by-step VTPv3 configuration Benefits of pruning üõ†Ô∏è Stuff I Use üõ†Ô∏è\nEVE-NG - multivendor network emulation software. Linux, Ubuntu, Debian OSX, Windows Networking hardware - Multi vendor # Subscribe on YouTube ","date":"17 July 2025","externalUrl":null,"permalink":"/videos/cisco-vtp-v3/","section":"Videos","summary":"","title":"Cisco VTP Version 3 The VLAN Sync King","type":"videos"},{"content":"","date":"17 July 2025","externalUrl":null,"permalink":"/tags/vtp/","section":"Tags","summary":"","title":"Vtp","type":"tags"},{"content":" # In this video we cover the basics of switching. Layer2 Mac addresses, VLANS, access ports, trunk ports, STP and some ether channel. its a long video but it should give you a understanding of network switching at a practical level. Please like and subscribe I learnt a lot about trying to record this information and just how hard it is. The next video will cover basics of routing and the firewall. Then we can start the fun labs.\n# üõ†Ô∏è Stuff I Use üõ†Ô∏è\nEVE-NG - multivendor network emulation software. Linux, Ubuntu, Debian OSX, Windows Networking hardware - Multi vendor # Subscribe on YouTube ","date":"16 July 2025","externalUrl":null,"permalink":"/videos/networking-basics-switching/","section":"Videos","summary":"","title":"Networking Basics: Switching","type":"videos"},{"content":"","date":"16 July 2025","externalUrl":null,"permalink":"/tags/switching/","section":"Tags","summary":"","title":"Switching","type":"tags"},{"content":" # Before the upcoming video where we dive deep into using Wireshark to uncover hidden truths on the network, I‚Äôll be going live to walk through the entire lab setup! We‚Äôll be preparing virtual machines for packet inspection, wiring up our testing environment, and laying the groundwork for a super insightful session on network traffic analysis. Whether you\u0026rsquo;re a seasoned engineer or just curious about what‚Äôs really happening behind your browser, this is a great chance to see how it all comes together. And hey‚Äîif you drop by the chat, don‚Äôt be shy. Say hi, share your thoughts, or just hang out as we get everything dialled in for the big video.\n# üõ†Ô∏è Stuff I Use üõ†Ô∏è\nEVE-NG - multivendor network emulation software. Linux, Ubuntu, Debian OSX, Windows Networking hardware - Multi vendor # Subscribe on YouTube ","date":"13 July 2025","externalUrl":null,"permalink":"/videos/building-the-wireshark-lab/","section":"Videos","summary":"","title":"Building the Wireshark Lab","type":"videos"},{"content":" # üé¨ Part 2 ‚Äì Building Redundant Internet for Customer DC The edventure continues! In this episode, we dive into the customer-side buildout of Uday‚Äôs data centre. From high-availability firewalls with seamless failover to robust access-to-core redundancy, we‚Äôre locking in full internet reachability. üõ°Ô∏èüåê Oh‚Äîand let‚Äôs not forget a touch of strategic spanning-tree finesse to keep things clean and efficient. Null0 Labs doesn‚Äôt just build networks‚Äîwe architect resilience. üîßüí°\n# üõ†Ô∏è Stuff I Use üõ†Ô∏è\nEVE-NG - multivendor network emulation software. Linux, Ubuntu, Debian OSX, Windows Networking hardware - Multi vendor # Subscribe on YouTube ","date":"13 July 2025","externalUrl":null,"permalink":"/videos/dual-homed-internet-p2/","section":"Videos","summary":"","title":"ISP-Level Redundancy: Building Dual-Homed Internet P2","type":"videos"},{"content":"","date":"13 July 2025","externalUrl":null,"permalink":"/tags/live/","section":"Tags","summary":"","title":"Live","type":"tags"},{"content":"In a world where multi-tenancy is standard and overlapping IP addressing is a common reality, Virtual Routing and Forwarding Lite (VRF-Lite) emerges as a clean and powerful solution. Whether you\u0026rsquo;re an enterprise splitting departments or a service provider managing distinct customers, VRF-Lite can streamline your architecture‚Äîwithout extra hardware overhead.\n# Today, I‚Äôm showcasing a lab I designed that demonstrates how VRF-Lite achieves traffic isolation and address overlap in a Tiered ISP environment. This topology simulates two different customers using the same IP space, and yet, thanks to VRF-Lite, they remain entirely segregated.\n# What is VRF-Lite? # VRF-Lite allows a single physical router to support multiple, isolated routing tables. Think of it like creating mini-routers inside one chassis‚Äîeach with its own interfaces, routing protocols, and forwarding decisions.\nCore Benefits: # Traffic Separation: Prevents cross-talk between customers. Address Overlap: Enables duplicate IP ranges across VRFs. Efficiency: Removes the need for dedicated routers per tenant. Lab Topology Overview # Lab Overview 2 customers with over lapping IP ranges. The diagram illustrates a provider edge (P1) router connected to two customer sites: CustA_1 and CustB_1, both using identical addressing schemes but operating in complete isolation via VRFs.\nColor Code: # üü¢ CUST-A (Green VRF) üü£ CUST-B (Purple VRF) Key Interconnects: # Gig0/0.1 (dot1Q 100) ‚Üí VRF CUST-A Gig0/0.2 (dot1Q 200) ‚Üí VRF CUST-B Gig0/1 ‚Üí Link to CustA_1 Gig0/2 ‚Üí Link to CustB_1 Both customers have routers using the same loopback subnet 192.168.10.0/24, showcasing that overlapping IPs are fully viable with VRF-Lite.\nUnder the Hood: Key Configuration Highlights # VRF Definition on P1 # ip vrf CUST-A ip vrf CUST-B Subinterfaces with Encapsulation \u0026amp; Routing # interface Gig0/0.1 encapsulation dot1Q 100 ip vrf forwarding CUST-A ip address 10.1.1.1 255.255.255.252 ip ospf 1 area 0 interface Gig0/0.2 encapsulation dot1Q 200 ip vrf forwarding CUST-B ip address 10.1.1.1 255.255.255.252 ip ospf 2 area 0 VRF-Scoped OSPF # router ospf 1 vrf CUST-A router ospf 2 vrf CUST-B With VRF-bound OSPF processes, each customer operates in their own logical routing domain‚Äîeven running the same protocols without collision.\nReal-World Implications # Using this technique, providers can easily deliver Layer 3 services to multiple customers with absolute isolation. Imagine an IXP or Tier 2 ISP who connects dozens of enterprises‚Äîeach running the same 192.168.X.X ranges internally. VRF-Lite is your safety net.\nValidation and Output # Wireshark Snapshot: Ping from CustA_1 Loopback to CustA_2g from CustA_1 Loopback to CustA_2 # You see the traffic is isolated within VLAN 100 on the link between P1 and P2\nPing Output (CustA_1 ‚Üí CustA_2)\nCustA_1#ping 192.168.11.1 repeat 5 Type escape sequence to abort. Sending 5, 100-byte ICMP Echos to 192.168.11.1, timeout is 2 seconds: !!!!! Success rate is 100 percent (5/5), round-trip min/avg/max = 2/2/2 ms Traceroute Snapshot (CustA_1 ‚Üí CustA_2)\nCustA_1#traceroute 192.168.11.1 Type escape sequence to abort. Tracing the route to 192.168.11.1 VRF info: (vrf in name/id, vrf out name/id) 1 10.10.10.1 1 msec 2 msec 1 msec 2 10.1.1.2 2 msec 2 msec 2 msec 3 10.10.20.2 3 msec 3 msec * Below showing the independent routing tables for CUST-A and CUST-B. Despite using overlapping address spaces, the P1 router handles each customer‚Äôs routes within their dedicated VRFs‚Äîensuring no crossover or leakage.\nDefault Routing Table (Global)\nP1#show ip route Empty VRF-Specific Routing Table: CUST-A\nP1#show ip route vrf CUST-A Routing Table: CUST-A\n\u0026lt;...routing codes...\u0026gt; 10.1.1.0/30 ‚Üí Connected via Gi0/0.1 192.168.10.1/32 ‚Üí Learned via OSPF from CustA_1 192.168.11.1/32 ‚Üí Learned from remote CustA site VRF-Specific Routing Table: CUST-B\nP1#show ip route vrf CUST-B Routing Table: CUST-B\n\u0026lt;...routing codes...\u0026gt; 10.1.1.0/30 ‚Üí Connected via Gi0/0.2 192.168.10.1/32 ‚Üí Learned via OSPF from CustB_1 192.168.11.1/32 ‚Üí Learned from remote CustB site Conclusion: the output confirms that traffic for each customer is strictly confined to their respective VRF routing tables, even though they both use the 192.168.10.0/32 and 192.168.11.0/32 spaces. Nice üòä\nFinal Thoughts # VRF-Lite may be ‚Äúlite‚Äù in name, but its impact on routing architectures is anything but. If you‚Äôre working on lab environments in EVE-NG or simulating a multi-customer ISP scenario, this is a vital tool in your kit. And best of all‚Äîit\u0026rsquo;s scalable, elegant, and battle-tested.\nWishing you a great week‚Äîkeep learning, keep engineering, and stay curious.stay curious.\n","date":"13 July 2025","externalUrl":null,"permalink":"/blog/vrf-lite-routing/","section":"Blog","summary":"","title":"Routing with VRF-Lite","type":"blog"},{"content":"","date":"13 July 2025","externalUrl":null,"permalink":"/tags/security/","section":"Tags","summary":"","title":"Security","type":"tags"},{"content":"","date":"13 July 2025","externalUrl":null,"permalink":"/tags/vrf-lite/","section":"Tags","summary":"","title":"Vrf-Lite","type":"tags"},{"content":"","date":"13 July 2025","externalUrl":null,"permalink":"/tags/wireshark/","section":"Tags","summary":"","title":"Wireshark","type":"tags"},{"content":" # Hi welcome to the first video on the channel where we wil start setting up and delivering dual homed internet service to our virtual customer in the lab. Follow along as we build out this lab enviroment to cover the basics of networking and routing. Please remember to hit that like and subscribe button to help the channel grow. Thank you and stay tuned for more.\n# üõ†Ô∏è Stuff I Use üõ†Ô∏è\nEVE-NG - multivendor network emulation software. Linux, Ubuntu, Debian OSX, Windows Networking hardware - Multi vendor # Subscribe on YouTube ","date":"11 July 2025","externalUrl":null,"permalink":"/videos/dual-homed-internet-p1/","section":"Videos","summary":"","title":"ISP-Level Redundancy: Building Dual-Homed Internet P1","type":"videos"},{"content":"","date":"7 July 2025","externalUrl":null,"permalink":"/tags/l2tp/","section":"Tags","summary":"","title":"L2TP","type":"tags"},{"content":"","date":"7 July 2025","externalUrl":null,"permalink":"/tags/xconnect/","section":"Tags","summary":"","title":"Xconnect","type":"tags"},{"content":"In a previous post, I looked at using L2TP tunnels to support wholesale broadband environments using PPPoE and dynamic RADIUS-based handoff. This time let‚Äôs pivot to a slightly different but powerful application: extending Layer 2 connectivity across routed infrastructure using XConnect over L2TPv3 secured with IPSec.\nWhy XConnect + L2TPv3? # XConnect, also known as pseudowire, enables us to extend an Ethernet segment (or even full 802.1Q trunk) transparently across an IP network. Combined with L2TPv3, which encapsulates Layer 2 frames in IP, and IPSec for encryption, we get:\nEnd-to-end encrypted Layer 2 connectivity Routing domain independence ‚Äî works over any IP routed core Realistic lab environments ‚Äî simulate MPLS/VPLS behaviour Use-case versatility ‚Äî cross-site VLAN bridging, heartbeat links etc Example of a Xconnect setup between 2 sites layer2 extended across a public routed network to a second location over a single tunnel. Layer we will add a secondary path for redundancy. Why IPsec ? # Using IPSec allows the traffic to be secured before transmitting it over a public routed infrastucture. Here is a capture of traffic heading to the gateway we can see all the data. and after encapsulation we only see traffic between the tunnel endpoints and its encrypted.\nThis shows the original payload ‚Äî including 802.1Q tags and full Layer 2 headers ‚Äî untouched before encapsulation. Notice the transition to L2TPv3 inside IPSec (ESP) ‚Äî payloads are now opaque, encrypted, and protected across the transit network. Adding a Secondary Tunnel for Redundancy # To improve resilience, we add a second tunnel path to build a redundant XConnect with failover. This protects the connection from WAN or router failure on either side.\nTunnel 1 to Site 1 via ISP 1 Tunnel 2 to Site 2 via ISP 2 Monitor the tunnels using SLA and routing metrics to failover the tunnel path Full configurations are listed below showing the SLA monitor used and the static route metric adjustments to handle failover with IPSec.\nThe same network but now with full redundancy. if the tunnel path via ISP1 goes down a tunnel path via ISP2 is used maintaining connectivity. Below is a before and after of the routing table of Site1 you see the path for the Xconnect is via tunnel 1 but when the SLA monitor sees the link fail the route is changed to use tunnel 2 and the xconnect stays up and passing traffic.\nBelow you see the xconnect endpoint 10.10.10.2 is reachable via tunnel 1\nSITE-1#show ip route Gateway of last resort is not set 10.0.0.0/32 is subnetted, 2 subnets C 10.10.10.1 is directly connected, Loopback100 S 10.10.10.2 is directly connected, Tunnel1 192.0.2.0/24 is variably subnetted, 3 subnets, 2 masks C 192.0.2.0/30 is directly connected, GigabitEthernet1 L 192.0.2.2/32 is directly connected, GigabitEthernet1 S 192.0.2.6/32 [1/0] via 192.0.2.1 198.51.100.0/32 is subnetted, 1 subnets S 198.51.100.2 [1/0] via 201.0.113.1 201.0.113.0/24 is variably subnetted, 2 subnets, 2 masks C 201.0.113.0/30 is directly connected, GigabitEthernet2 L 201.0.113.2/32 is directly connected, GigabitEthernet2 When the link to ISP 1 is broken\n%TRACK-6-STATE: 1 ip sla 1 reachability Up -\u0026gt; Down Now the endpoint is still reachable but via Tunnel 2 automatically\nSITE-1#show ip route Gateway of last resort is not set 10.0.0.0/32 is subnetted, 2 subnets C 10.10.10.1 is directly connected, Loopback100 S 10.10.10.2 is directly connected, Tunnel2 192.0.2.0/24 is variably subnetted, 3 subnets, 2 masks C 192.0.2.0/30 is directly connected, GigabitEthernet1 L 192.0.2.2/32 is directly connected, GigabitEthernet1 S 192.0.2.6/32 [1/0] via 192.0.2.1 198.51.100.0/32 is subnetted, 1 subnets S 198.51.100.2 [1/0] via 201.0.113.1 201.0.113.0/24 is variably subnetted, 2 subnets, 2 masks C 201.0.113.0/30 is directly connected, GigabitEthernet2 L 201.0.113.2/32 is directly connected, GigabitEthernet2 Testing Layer 2 Connectivity \u0026amp; VLAN Trunking # With the XConnect up, traffic from Server 1 in VLAN 100 can reach Server 2 on the far side, across what appears to be a direct Ethernet trunk ‚Äî even though it‚Äôs transiting a routed, encrypted WAN core like MAGIC.\nBelow we can see server1 and server2 in VLAN 100 have reachability and only 1 hop away\nThe ARP table from server 1 only sees Server 2 in the table as its in the same broadcast domain The local switch Site1 has a trunk contigured on g1/0/1 and only VLAN 100,200,300 allowed\nThe ports connected to the servers are in the corospoding VLAN but as access ports\nASW-4-S1#show interfaces trunk Port Mode Encapsulation Status Native vlan Gi1/0/1 on 802.1q trunking 1 Port Vlans allowed on trunk Gi1/0/1 100,200,300 A Capture from Site 2 switch shows the traffic from Server 1 reaching server 2 and the correct VLAN 100 is visible\nPacket capture of traffic on remote switch after transiting tunnel This confirms that:\nLayer 2 continuity is intact VLAN tags are preserved No routing/NAT/firewall interference exists Device Configuration # Here are the complete configurations from site 1. Note site 2 has a similar configuration with IP address and endpoint changes. feel free use in your own labs and experiment with failover.\nSite 1 C8000v Config (Condensed):\nhostname SITE-1 ! ! l2tp-class xconnect-l2tp authentication password securePassword ! ! ! ! track 1 ip sla 1 reachability pseudowire-class xconnect-pw encapsulation l2tpv3 protocol l2tpv3 xconnect-l2tp status control-plane route-watch ip local interface Loopback100 ip pmtu ! ! ! ! ! ! ! ! ! crypto isakmp policy 10 encryption aes 256 hash sha512 authentication pre-share group 14 crypto isakmp key SecretPhrase address 192.0.2.6 crypto isakmp key SecretPhrase2 address 198.51.100.2 ! ! crypto ipsec transform-set TSVTI esp-aes 256 mode transport ! crypto ipsec profile VTI set transform-set TSVTI ! ! ! ! ! ! interface Loopback100 description Xconnect Endpoint ip address 10.10.10.1 255.255.255.255 ! interface Tunnel1 description Encrypted Primary Tunnel to Site2 ip unnumbered GigabitEthernet1 ip mtu 1400 tunnel source 192.0.2.2 tunnel mode ipsec ipv4 tunnel destination 192.0.2.6 tunnel protection ipsec profile VTI ! interface Tunnel2 description Encrypted Backup Tunnel to Site2 ip unnumbered GigabitEthernet2 ip mtu 1400 tunnel source 201.0.113.2 tunnel mode ipsec ipv4 tunnel destination 198.51.100.2 tunnel protection ipsec profile VTI ! interface GigabitEthernet1 description ISP1 Prmary Connection ip address 192.0.2.2 255.255.255.252 negotiation auto ! interface GigabitEthernet2 description ISP2 Backup Connection ip address 201.0.113.2 255.255.255.252 negotiation auto ! ! interface GigabitEthernet4 description Xconnect Interface no ip address negotiation auto no keepalive xconnect 10.10.10.2 100 encapsulation l2tpv3 pw-class xconnect-pw ! ! ! ip route 10.10.10.2 255.255.255.255 Tunnel1 name XCONN-PRI track 1 ip route 10.10.10.2 255.255.255.255 Tunnel2 200 name XCONN-SEC ip route 192.0.2.6 255.255.255.255 192.0.2.1 name SITE2-PRI-TEP ip route 198.51.100.2 255.255.255.255 201.0.113.1 name SITE2-SEC-TEP ! ! ip sla 1 icmp-echo 192.0.2.6 source-interface GigabitEthernet1 frequency 5 ip sla schedule 1 life forever start-time now ! ! end Site 1 C9000v Switch (Condensed):\nhostname ASW-4-S1 ! interface GigabitEthernet1/0/1 description UPLINK_XCONNECT_TO_GW switchport trunk allowed vlan 100,200,300 switchport mode trunk no cdp enable ! interface GigabitEthernet1/0/2 description SRV1-VLAN100 switchport access vlan 100 switchport mode access ! interface GigabitEthernet1/0/3 description SRV1-VLAN200 switchport access vlan 200 switchport mode access ! interface GigabitEthernet1/0/4 description SRV1-VLAN300 switchport access vlan 300 switchport mode access ! ! end Why This Matters # Having XConnect over L2TPv3 + IPSec in your toolkit is a game-changer. It gives you a way to:\nSimulate MPLS/VPLS environments in the lab Bridge VLANs across public or test networks securely Provide Layer 2 services over routed IP infrastructure Prototype new services before full deployment Keep Learning, Keep Engineering # Whether you‚Äôre deep into SP architectures or just starting with advanced tunneling concepts, tools like XConnect remind us that networking is more than just routing and switching ‚Äî it‚Äôs about enabling any service over any medium securely and reliably.\nKeep experimenting. Keep building. And most importantly ‚Äî stay curious.\n","date":"7 July 2025","externalUrl":null,"permalink":"/blog/xconnect-over-l2tpv3-ipsec/","section":"Blog","summary":"","title":"XConnect over L2TPv3 + IPSec","type":"blog"},{"content":"","date":"6 July 2025","externalUrl":null,"permalink":"/tags/broadband/","section":"Tags","summary":"","title":"Broadband","type":"tags"},{"content":"","date":"6 July 2025","externalUrl":null,"permalink":"/tags/cityfibre/","section":"Tags","summary":"","title":"Cityfibre","type":"tags"},{"content":"Recently, I made the switch from Virgin Media to City Fibre for my home broadband. As a long-standing network engineer, the moment I saw City Fibre offering a selection of multiple ISPs delivered over a single GPON connection, my curiosity was immediately piqued.\nNaturally, I couldn‚Äôt resist diving under the hood to figure out how it works.\nThe Premise # CityFibre acts as a wholesale network, offering a broadband access layer to multiple ISPs via PPPoE and IPoE. You‚Äîthe end user‚Äîchoose your ISP during signup, and your connection is magically handed off to them, without changing physical infrastructure.\nBut as engineers know nothing is ever magic. It‚Äôs just a very clever design.\nMy Mission: Simulate CityFibre‚Äôs Model # So, I did what any self-respecting nerd would do: I recreated the architecture in a lab environment.\nI spun up a multi-ISP broadband network in EVE-NG with the following core components:\nVirtual Devices used Cisco C8000v Routers, Astria EOS Switches, Debian Linux with FreeRadius 3.0, Cisco IOL devices for PPPoE Clients.\nA CityFibre-style LAC handling PPPoE sessions. Multiple ISP LNS routers - (ZEN, VODA, GIGA). Per-ISP RADIUS servers for authentication. Full L2TP handoff between LAC and LNS, using dynamic AVP steering. A simulated OLT and multiple PPPoE clients, each mapped to a different ISP. A ‚ÄúRest of Internet‚Äù node to simulate upstream connectivity with a test IP and allow the 3 test ISPs to reach each other. Network Overview, Keep in mind we are onlu focusig on the PPPoE Access layer Traffic Flows: End-to-End # PPPoE clients authenticate via the LAC to the City Radius Server. The RADIUS returns the L2TP tunnel attributes based on the user‚Äôs domain suffix. LAC builds an L2TP tunnel to the selected ISP‚Äôs LNS. The LNS performs its own RADIUS auth and assigns IPs, routes, etc. Traffic flows via the LNS out to the simulated ‚ÄúInternet.‚Äù LAC makes request for Tunnel AVP details to steer the user to the correct LNS LAC showing L2TP tunnels up and PPP forwarded to the LNS PPPoe Sessions on the LAC Deep Dives: Discoveries Along the Way # After many hours trawling through Cisco documentation and lab debugging, I uncovered a few golden nuggets:\nThe LAC makes a RADIUS Access-Request during the PPPoE phase. It expects the tunnel attributes (like the LNS address) to be returned from the RADIUS. By default, Cisco IOS uses a tunnel password of cisco unless explicitly configured. That one took longer than I‚Äôd like to admit! ü´£\nBut I pushed to get this working as I could easily steer the users to the correct LNS using statically configured vpdn groups but the more I thought about it that would not scale well and having to update every router vpdn groups even with a template would be painful.\nThe Radius Server debug displays the password ‚Äòcisco‚Äô even though it wasn\u0026rsquo;t configured anywhere, as noted in the Cisco documentation found at 2am.\nId 46 from 10.255.0.100:1645 to 192.1.1.2:1812 length 123 (1)User-Name = \u0026#34;zen.net\u0026#34; (1)User-Password = \u0026#34;cisco\u0026#34; üò° (1) NAS-Port-Type = Virtual (1) NAS-Port = 0 (1) NAS-Port-Id = \u0026#34;0/0/4/911\u0026#34; (1) Cisco-AVPair = \u0026#34;client-mac-address=aabb.cc00.4000\u0026#34; (1) Service-Type = Outbound-User (1) NAS-IP-Address = 10.255.0.100 and there is was the password cisco is used just as a trigger Verifying the Build # Once everything was stitched together, I validated the setup by pinging between PPPoE clients and the simulated internet.\nI tested that all PPPoE clients can reach eachother and the test IP of 5.5.5.5 on the ROI node.\nZenPPPoE#ping 5.5.5.5 Type escape sequence to abort. Sending 5, 100-byte ICMP Echos to 5.5.5.5, timeout is 2 seconds: !!!!! Success rate is 100 percent (5/5), round-trip min/avg/max = 1/2/4 ms ZenPPPoE#ping 10.103.1.200 Type escape sequence to abort. Sending 5, 100-byte ICMP Echos to 10.103.1.200, timeout is 2 seconds: !!!!! Success rate is 100 percent (5/5), round-trip min/avg/max = 6/7/8 ms ZenClient ‚Üî VodaClient VodaClient‚Üî GigaClient Each client ‚Üî test IP on ‚ÄúRest-of-Internet‚Äù Node 5.5.5.5 Why This Matters # City Fibre‚Äôs architecture is a brilliant real-world use of:\nWholesale L2TP tunnelling Dynamic RADIUS AVP steering Scalable multi-ISP provisioning over GPON\nUnderstanding it from the inside out gave me a huge appreciation for the engineering behind the simplicity offered to end users.\nExample of the configurations # LAC configuration:\nCurrent configuration : 8984 bytes ! ! Last configuration change at 08:22:35 UTC Sun Jul 6 2025 by admin ! version 17.16 service timestamps debug datetime msec service timestamps log datetime msec platform qfp utilization monitor load 80 platform sslvpn use-pd platform console serial ! hostname CITY-LAC ! boot-start-marker boot-end-marker ! ! aaa new-model ! ! aaa authentication login default local aaa authentication ppp default if-needed group radius aaa authorization exec default local aaa authorization commands 15 default local aaa authorization network default group radius aaa accounting network default start-stop group radius ! ! aaa session-id common ! ! ! ! ! no ip domain lookup ! ! ! login on-success log ! ! subscriber templating ! ! ! ! ! ! vpdn enable vpdn multihop vpdn aaa attribute nas-ip-address vpdn-nas vpdn tunnel authorization network default vpdn tunnel accounting network default vpdn session accounting network default vpdn search-order domain ! vpdn-group default request-dialin protocol l2tp source-ip 10.255.0.100 ! ! ! ! ! ! ! ! ! license boot level network-advantage addon dna-advantage memory free low-watermark processor 188978 diagnostic bootup level minimal ! ! spanning-tree extend system-id ! ! ! username admin privilege 15 secret 9 removed ! redundancy ! ! ! ! ! ! ! ! bba-group pppoe GLOBAL_BBA_GROUP virtual-template 1 ! ! ! interface Loopback0 description Local Loop ip address 10.255.0.100 255.255.255.255 ! interface GigabitEthernet1 description UPLINK_TO_CORE_NETWORK mtu 1508 no ip address negotiation auto ! interface GigabitEthernet1.100 description S-VLAN100 LNS ZEN encapsulation dot1Q 100 ip address 192.0.2.1 255.255.255.252 ! interface GigabitEthernet1.200 description S-VLAN200 LNS VODAFONE encapsulation dot1Q 200 ip address 192.0.2.5 255.255.255.252 ! interface GigabitEthernet1.300 description S-VLAN300 LNS GIGA encapsulation dot1Q 300 ip address 192.0.2.9 255.255.255.252 ! interface GigabitEthernet2 no ip address shutdown negotiation auto ! interface GigabitEthernet3 description CITY_RADIUS ip address 192.1.1.1 255.255.255.0 negotiation auto ! interface GigabitEthernet4 mtu 1508 no ip address negotiation auto ! interface GigabitEthernet4.911 encapsulation dot1Q 911 pppoe enable group GLOBAL_BBA_GROUP ! interface Virtual-Template1 mtu 1492 no ip address no peer default ip address ppp mtu adaptive ppp authentication chap ! ip forward-protocol nd ip forward-protocol udp ! no ip http server ip http authentication local no ip http secure-server ip route 10.255.0.1 255.255.255.255 GigabitEthernet1.100 ip route 10.255.0.2 255.255.255.255 GigabitEthernet1.200 ip route 10.255.0.3 255.255.255.255 GigabitEthernet1.300 ip ssh bulk-mode 131072 ! ip radius source-interface Loopback0 ! ! radius-server attribute nas-port format d ! radius server rad01 address ipv4 192.1.1.2 auth-port 1812 acct-port 1813 key RADIUSsecret ! ! ! control-plane ! ! mgcp behavior rsip-range tgcp-only mgcp behavior comedia-role none mgcp behavior comedia-check-media-src disable mgcp behavior comedia-sdp-force disable ! mgcp profile default ! ! ! ! ! line con 0 stopbits 1 line aux 0 line vty 0 4 transport input all ! ! ! ! ! ! ! end LNS Configuration:\nCurrent configuration : 8277 bytes ! ! Last configuration change at 08:22:28 UTC Sun Jul 6 2025 by admin ! version 17.16 service timestamps debug datetime msec service timestamps log datetime msec platform qfp utilization monitor load 80 platform sslvpn use-pd platform console serial ! hostname ZEN-LNS ! boot-start-marker boot-end-marker ! ! aaa new-model ! ! aaa authentication login default local aaa authentication ppp default group radius aaa authorization exec default local aaa authorization network default group radius local aaa accounting delay-start aaa accounting network default start-stop group radius ! ! aaa session-id common ! ! ! ! ! ! login on-success log ! ! subscriber templating ! ! ! ! ! ! vpdn enable vpdn multihop ! vpdn-group PPPOE_VPDN accept-dialin protocol l2tp virtual-template 1 terminate-from hostname CITY-LAC local name ZEN-LNS lcp renegotiation always l2tp tunnel password 0 ZenPass ! ! ! ! ! ! ! license udi pid C8000V sn 9GKY9515S9W license boot level network-advantage addon dna-advantage memory free low-watermark processor 188978 diagnostic bootup level minimal ! ! spanning-tree extend system-id ! ! ! username admin privilege 15 secret 9 removed ! redundancy ! ! ! ! ! ! ! ! ! ! interface Loopback0 description LNS Loopback ip address 10.255.0.1 255.255.255.255 ! interface GigabitEthernet1 mtu 1508 no ip address negotiation auto ! interface GigabitEthernet1.100 description SVLAN-TAG LINK TO CITYLINK encapsulation dot1Q 100 ip address 192.0.2.2 255.255.255.252 ! interface GigabitEthernet2 ip address 192.168.100.2 255.255.255.252 negotiation auto ! interface GigabitEthernet3 description LINK_TO_RADIUS ip address 192.168.4.1 255.255.255.0 negotiation auto ! interface GigabitEthernet4 no ip address shutdown negotiation auto ! interface Virtual-Template1 mtu 1492 ip unnumbered Loopback0 peer default ip address pool ZENPOOL ppp authentication chap ! ip local pool ZENPOOL 10.101.1.10 10.101.1.100 ip forward-protocol nd ip forward-protocol udp ! ip http server ip http authentication local ip http secure-server ip route 0.0.0.0 0.0.0.0 GigabitEthernet2 ip route 0.0.0.0 0.0.0.0 192.168.100.1 ip route 10.255.0.100 255.255.255.255 GigabitEthernet1.100 ip ssh bulk-mode 131072 ! ip radius source-interface Loopback0 ! ! ! radius server radiusServer address ipv4 192.168.4.2 auth-port 1812 acct-port 1813 key RADIUSsecret ! ! ! control-plane ! ! mgcp behavior rsip-range tgcp-only mgcp behavior comedia-role none mgcp behavior comedia-check-media-src disable mgcp behavior comedia-sdp-force disable ! mgcp profile default ! ! ! ! ! ! line con 0 stopbits 1 line aux 0 line vty 0 4 transport input ssh ! ! ! ! ! ! ! end City Radius domain streering config:\nConfig to steer the inbound PPPoe Users to the correc LNS for fully PPP authentication and IP addressing. Lessons Learned # Even the most seamless consumer services are powered by beautiful complexity. It‚Äôs never just PPPoE and L2TP‚Äîespecially when you‚Äôre steering at scale. Having the right tools and test harness (EVE-NG, Cisco IOSv, FreeRADIUS) is invaluable. (Might need to hit up David Mayberry at go-communications for some high quaility refurbished Cisco kit for a real lab test üòú) Keep pushing and testing you will find the bug Cisco docs and google will help you find answers\nKeen to hear from others building similar wholesale or carrier models. If you‚Äôre exploring PPPoE, LNS, or building your own BNG-like setup‚Äîdrop a comment or message. I‚Äôd love to exchange notes! Especially the infamous \u0026ldquo;User-Password = cisco\u0026rdquo; mystery‚Äîthis one‚Äôs a classic when dealing with LACs and RADIUS in a VPDN setup.\n","date":"6 July 2025","externalUrl":null,"permalink":"/blog/cityfibre/","section":"Blog","summary":"","title":"Virgin Media to CityFibre: A Network Engineer‚Äôs Curiosity Unleashed","type":"blog"},{"content":" üë®üèª‚Äçüíª Engineer by day # Hey, I‚Äôm Matt‚Äîfounder of Null0 Labs and a Senior Network Engineer with 20+ years logged on the command line, architecting, securing, and scaling high-availability infrastructure across enterprise-grade networks. Null0 Labs is where I config, break, fix, and iterate‚Äîsharing what I know, documenting what I learn, and deep-diving into everything from routing, switching and firewalls to multi-vendor lab setups. I thrive on learning something new each day and converting that into clean configs, clear content, and a few laughs along the way.\nOn my channel, you‚Äôll find hands-on walkthroughs and simulations covering:\nüöÄ Routing \u0026amp; Switching fundamentals and advanced configs üõ°Ô∏è Firewalls \u0026amp; security with Fortinet, Palo Alto, and more üß† Protocol mastery in Cisco, Juniper, and hybrid infrastructures üêß A dash of Linux for tooling, automation, and terminal fluency üì° Streaming live topologies and lab breakdowns If you\u0026rsquo;re into building, breaking, and bettering your network skills‚ÄîNull0 Labs is your new home.\n‚úÖ Support the Channel # # Creating high-quality videos, in-depth lab walkthroughs, and free resources for the networking community takes serious time and dedication. If you‚Äôve found value in what I do, subscribing to the Null0 Labs YouTube channel is the best way to show support. That one click helps me keep the content coming‚Äîrefined, relevant, and ready to level up your skills.\nüîî Subscribe to stay updated on new releases üí¨ Comments, likes, and shares go a long way‚Äîthey tell the algorithm (and me) that this content matters. Thanks for being part of the journey‚Äîevery bit of support makes a difference.\n# Subscribe on YouTube ","externalUrl":null,"permalink":"/about/","section":"","summary":"","title":"About Me","type":"page"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"}]